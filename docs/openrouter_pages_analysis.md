# OpenRouter é¡µé¢åŠŸèƒ½åˆ†æä¸å¼€å‘å®ç°æ–¹æ¡ˆ

## ğŸ“Š é¡µé¢åŠŸèƒ½åˆ†æ

### 1. ä¸»é¡µ (/)
**åŠŸèƒ½ç‰¹æ€§**ï¼š
- äº§å“ä»‹ç»å’Œæ ¸å¿ƒä»·å€¼å±•ç¤º
- å¿«é€Ÿå¼€å§‹å‘å¯¼
- æ¨¡å‹æœç´¢æ¡†
- çƒ­é—¨æ¨¡å‹æ¨è
- å®æ—¶ç»Ÿè®¡æ•°æ®ï¼ˆè¯·æ±‚é‡ã€æ¨¡å‹æ•°é‡ç­‰ï¼‰
- ç”¨æˆ·ç™»å½•/æ³¨å†Œå…¥å£

**å…³é”®å…ƒç´ **ï¼š
- Hero Bannerï¼ˆä¸»è§†è§‰åŒºï¼‰
- æ¨¡å‹æœç´¢ç»„ä»¶
- ç»Ÿè®¡å¡ç‰‡
- å¿«é€Ÿé“¾æ¥å¯¼èˆª

### 2. æ¨¡å‹åˆ—è¡¨é¡µ (/models)
**åŠŸèƒ½ç‰¹æ€§**ï¼š
- æ¨¡å‹å¡ç‰‡ç½‘æ ¼å±•ç¤º
- å¤šç»´åº¦ç­›é€‰ï¼ˆä¾›åº”å•†ã€èƒ½åŠ›ã€ä»·æ ¼ã€ä¸Šä¸‹æ–‡é•¿åº¦ï¼‰
- æœç´¢åŠŸèƒ½
- æ’åºé€‰é¡¹ï¼ˆä»·æ ¼ã€é€Ÿåº¦ã€è´¨é‡ï¼‰
- æ¨¡å‹è¯¦æƒ…å¼¹çª—
- ä»·æ ¼å¯¹æ¯”åŠŸèƒ½

**æ•°æ®å±•ç¤º**ï¼š
- æ¨¡å‹åç§°å’Œä¾›åº”å•†
- è¾“å…¥/è¾“å‡ºä»·æ ¼
- ä¸Šä¸‹æ–‡çª—å£å¤§å°
- é€Ÿåº¦è¯„åˆ†
- åŠŸèƒ½æ ‡ç­¾ï¼ˆChatã€Codeã€Visionç­‰ï¼‰

### 3. æ’è¡Œæ¦œé¡µ (/rankings)
**åŠŸèƒ½ç‰¹æ€§**ï¼š
- æ¨¡å‹æ€§èƒ½æ’å
- å¤šç»´åº¦æ¦œå•ï¼ˆè´¨é‡ã€é€Ÿåº¦ã€æ€§ä»·æ¯”ï¼‰
- æ—¶é—´å‘¨æœŸåˆ‡æ¢ï¼ˆæ—¥ã€å‘¨ã€æœˆï¼‰
- ç”¨é‡è¶‹åŠ¿å›¾è¡¨
- ç¤¾åŒºè¯„åˆ†å±•ç¤º

**æ’è¡Œç»´åº¦**ï¼š
- ä½¿ç”¨é‡æ’è¡Œ
- æ€§ä»·æ¯”æ’è¡Œ
- é€Ÿåº¦æ’è¡Œ
- ç”¨æˆ·è¯„åˆ†æ’è¡Œ

### 4. é¢åº¦ç®¡ç†é¡µ (/settings/credits)
**åŠŸèƒ½ç‰¹æ€§**ï¼š
- ä½™é¢æ˜¾ç¤º
- å……å€¼åŠŸèƒ½
- æ¶ˆè´¹è®°å½•
- ç”¨é‡é¢„è­¦è®¾ç½®
- è‡ªåŠ¨å……å€¼é…ç½®
- å‘ç¥¨ç®¡ç†

**æ”¯ä»˜é›†æˆ**ï¼š
- ä¿¡ç”¨å¡æ”¯ä»˜
- PayPal
- åŠ å¯†è´§å¸
- ä½™é¢è½¬è´¦

### 5. API Keys ç®¡ç†é¡µ (/settings/keys)
**åŠŸèƒ½ç‰¹æ€§**ï¼š
- API Key åˆ—è¡¨
- åˆ›å»ºæ–° Key
- Key æƒé™è®¾ç½®
- ä½¿ç”¨é™åˆ¶é…ç½®
- è®¿é—®æ—¥å¿—
- Key è½®æ¢ç®¡ç†

**å®‰å…¨åŠŸèƒ½**ï¼š
- IP ç™½åå•
- è¯·æ±‚é™æµ
- æ¨¡å‹è®¿é—®æƒé™
- è¿‡æœŸæ—¶é—´è®¾ç½®

### 6. æ´»åŠ¨è®°å½•é¡µ (/activity)
**åŠŸèƒ½ç‰¹æ€§**ï¼š
- è¯·æ±‚å†å²åˆ—è¡¨
- è¯¦ç»†æ—¥å¿—å±•ç¤º
- æ—¶é—´èŒƒå›´ç­›é€‰
- æ¨¡å‹ä½¿ç”¨ç»Ÿè®¡
- æˆæœ¬åˆ†æ
- é”™è¯¯è¿½è¸ª

**æ•°æ®åˆ†æ**ï¼š
- Token ç”¨é‡ç»Ÿè®¡
- æˆæœ¬è¶‹åŠ¿å›¾
- æ¨¡å‹ä½¿ç”¨åˆ†å¸ƒ
- é”™è¯¯ç‡åˆ†æ

### 7. åå¥½è®¾ç½®é¡µ (/settings/preferences)
**åŠŸèƒ½ç‰¹æ€§**ï¼š
- ç•Œé¢ä¸»é¢˜è®¾ç½®
- è¯­è¨€åå¥½
- é€šçŸ¥è®¾ç½®
- é»˜è®¤å‚æ•°é…ç½®
- éšç§è®¾ç½®
- æ•°æ®å¯¼å‡º

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### å‰ç«¯æŠ€æœ¯æ ˆ
```
- React 18 + TypeScript
- Material-UI / Ant Design
- React Router v6
- Redux Toolkit (çŠ¶æ€ç®¡ç†)
- Recharts (å›¾è¡¨)
- Axios (APIè¯·æ±‚)
```

### åç«¯æŠ€æœ¯æ ˆ
```
- Go + Gin Framework
- GORM (ORM)
- Redis (ç¼“å­˜/ä¼šè¯)
- MySQL/PostgreSQL
- JWT (è®¤è¯)
- Google OAuth2
```

### é¡µé¢è·¯ç”±ç»“æ„
```
/                          # ä¸»é¡µ
/login                     # ç™»å½•é¡µ
/dashboard                 # ç”¨æˆ·ä»ªè¡¨ç›˜
â”œâ”€â”€ /models               # æ¨¡å‹åˆ—è¡¨
â”œâ”€â”€ /rankings             # æ’è¡Œæ¦œ
â”œâ”€â”€ /credits              # é¢åº¦ç®¡ç†
â”œâ”€â”€ /keys                 # API Keys
â”œâ”€â”€ /activity             # æ´»åŠ¨è®°å½•
â”œâ”€â”€ /settings             # è®¾ç½®
â”‚   â”œâ”€â”€ /preferences      # åå¥½è®¾ç½®
â”‚   â”œâ”€â”€ /profile         # ä¸ªäººèµ„æ–™
â”‚   â””â”€â”€ /security        # å®‰å…¨è®¾ç½®
â””â”€â”€ /admin                # ç®¡ç†åå°
```

---

## ğŸ”Œ åç«¯APIæ¥å£è®¾è®¡

### è®¤è¯ç›¸å…³ API
```go
POST   /api/auth/google           # Google OAuthç™»å½•
POST   /api/auth/refresh          # åˆ·æ–°Token
POST   /api/auth/logout           # ç™»å‡º
GET    /api/auth/user             # è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
```

### æ¨¡å‹ç›¸å…³ API
```go
GET    /api/models                # è·å–æ¨¡å‹åˆ—è¡¨
GET    /api/models/:id            # è·å–æ¨¡å‹è¯¦æƒ…
GET    /api/models/search         # æœç´¢æ¨¡å‹
GET    /api/models/rankings       # è·å–æ¨¡å‹æ’è¡Œ
POST   /api/models/compare        # æ¨¡å‹å¯¹æ¯”
```

### é¢åº¦ç®¡ç† API
```go
GET    /api/credits/balance       # è·å–ä½™é¢
POST   /api/credits/recharge      # å……å€¼
GET    /api/credits/transactions  # äº¤æ˜“è®°å½•
POST   /api/credits/alerts        # è®¾ç½®é¢„è­¦
```

### API Key ç®¡ç†
```go
GET    /api/keys                  # è·å–Keyåˆ—è¡¨
POST   /api/keys                  # åˆ›å»ºæ–°Key
PUT    /api/keys/:id             # æ›´æ–°Keyè®¾ç½®
DELETE /api/keys/:id              # åˆ é™¤Key
GET    /api/keys/:id/logs        # è·å–Keyä½¿ç”¨æ—¥å¿—
```

### æ´»åŠ¨è®°å½• API
```go
GET    /api/activity/logs         # è·å–æ´»åŠ¨æ—¥å¿—
GET    /api/activity/stats        # è·å–ç»Ÿè®¡æ•°æ®
GET    /api/activity/usage        # è·å–ç”¨é‡åˆ†æ
POST   /api/activity/export       # å¯¼å‡ºæ•°æ®
```

### è®¾ç½®ç›¸å…³ API
```go
GET    /api/settings/preferences  # è·å–åå¥½è®¾ç½®
PUT    /api/settings/preferences  # æ›´æ–°åå¥½è®¾ç½®
GET    /api/settings/profile      # è·å–ä¸ªäººèµ„æ–™
PUT    /api/settings/profile      # æ›´æ–°ä¸ªäººèµ„æ–™
```

---

## ğŸ” Google OAuth ç™»å½•å®ç°

### 1. å‰ç«¯å®ç°
```tsx
// components/GoogleLogin.tsx
import { GoogleOAuthProvider, GoogleLogin } from '@react-oauth/google';

const GOOGLE_CLIENT_ID = process.env.REACT_APP_GOOGLE_CLIENT_ID;

export const GoogleLoginButton = () => {
  const handleSuccess = async (credentialResponse) => {
    const { credential } = credentialResponse;

    // å‘é€åˆ°åç«¯éªŒè¯
    const response = await fetch('/api/auth/google', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ token: credential })
    });

    const data = await response.json();
    if (data.success) {
      // ä¿å­˜JWT token
      localStorage.setItem('access_token', data.access_token);
      // è·³è½¬åˆ°ä»ªè¡¨ç›˜
      window.location.href = '/dashboard';
    }
  };

  return (
    <GoogleOAuthProvider clientId={GOOGLE_CLIENT_ID}>
      <GoogleLogin
        onSuccess={handleSuccess}
        onError={() => console.log('Login Failed')}
        theme="outline"
        size="large"
        text="signin_with"
        shape="rectangular"
      />
    </GoogleOAuthProvider>
  );
};
```

### 2. åç«¯å®ç°
```go
// controller/auth_google.go
package controller

import (
    "context"
    "encoding/json"
    "net/http"

    "github.com/gin-gonic/gin"
    "google.golang.org/api/oauth2/v2"
    "google.golang.org/api/option"
)

type GoogleAuthRequest struct {
    Token string `json:"token" binding:"required"`
}

func GoogleAuth(c *gin.Context) {
    var req GoogleAuthRequest
    if err := c.ShouldBindJSON(&req); err != nil {
        c.JSON(400, gin.H{"error": "Invalid request"})
        return
    }

    // éªŒè¯Google token
    ctx := context.Background()
    oauth2Service, err := oauth2.NewService(ctx, option.WithHTTPClient(http.DefaultClient))
    if err != nil {
        c.JSON(500, gin.H{"error": "Failed to create oauth2 service"})
        return
    }

    tokenInfo, err := oauth2Service.Tokeninfo().
        IdToken(req.Token).
        Context(ctx).
        Do()

    if err != nil {
        c.JSON(401, gin.H{"error": "Invalid token"})
        return
    }

    // æ£€æŸ¥æˆ–åˆ›å»ºç”¨æˆ·
    user, err := model.GetOrCreateUserByGoogle(tokenInfo.Email, tokenInfo.UserId)
    if err != nil {
        c.JSON(500, gin.H{"error": "Failed to create user"})
        return
    }

    // ç”ŸæˆJWT
    accessToken, _ := GenerateJWT(user.ID)
    refreshToken, _ := GenerateRefreshToken(user.ID)

    c.JSON(200, gin.H{
        "success": true,
        "access_token": accessToken,
        "refresh_token": refreshToken,
        "user": user,
    })
}
```

---

## ğŸ“ é¡µé¢ç»„ä»¶å®ç°ç¤ºä¾‹

### æ¨¡å‹åˆ—è¡¨é¡µç»„ä»¶
```tsx
// pages/Models.tsx
import React, { useState, useEffect } from 'react';
import {
  Grid, Card, CardContent, Typography, Chip,
  TextField, Select, MenuItem, Slider, Button,
  InputAdornment, Box, Pagination
} from '@mui/material';
import SearchIcon from '@mui/icons-material/Search';
import { fetchModels } from '../api/models';

interface Model {
  id: string;
  name: string;
  provider: string;
  description: string;
  pricing: {
    input: number;
    output: number;
  };
  contextLength: number;
  capabilities: string[];
  speed: number;
}

export const ModelsPage = () => {
  const [models, setModels] = useState<Model[]>([]);
  const [filteredModels, setFilteredModels] = useState<Model[]>([]);
  const [searchTerm, setSearchTerm] = useState('');
  const [provider, setProvider] = useState('all');
  const [priceRange, setPriceRange] = useState([0, 100]);
  const [capability, setCapability] = useState('all');
  const [sortBy, setSortBy] = useState('popular');
  const [page, setPage] = useState(1);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    loadModels();
  }, []);

  const loadModels = async () => {
    setLoading(true);
    try {
      const data = await fetchModels();
      setModels(data);
      setFilteredModels(data);
    } catch (error) {
      console.error('Failed to load models:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleSearch = (event: React.ChangeEvent<HTMLInputElement>) => {
    const term = event.target.value.toLowerCase();
    setSearchTerm(term);
    filterModels(term, provider, capability, priceRange);
  };

  const filterModels = (search: string, prov: string, cap: string, price: number[]) => {
    let filtered = models;

    // æœç´¢è¿‡æ»¤
    if (search) {
      filtered = filtered.filter(m =>
        m.name.toLowerCase().includes(search) ||
        m.description.toLowerCase().includes(search)
      );
    }

    // ä¾›åº”å•†è¿‡æ»¤
    if (prov !== 'all') {
      filtered = filtered.filter(m => m.provider === prov);
    }

    // èƒ½åŠ›è¿‡æ»¤
    if (cap !== 'all') {
      filtered = filtered.filter(m => m.capabilities.includes(cap));
    }

    // ä»·æ ¼è¿‡æ»¤
    filtered = filtered.filter(m =>
      m.pricing.input >= price[0] && m.pricing.input <= price[1]
    );

    // æ’åº
    switch (sortBy) {
      case 'price-low':
        filtered.sort((a, b) => a.pricing.input - b.pricing.input);
        break;
      case 'price-high':
        filtered.sort((a, b) => b.pricing.input - a.pricing.input);
        break;
      case 'speed':
        filtered.sort((a, b) => b.speed - a.speed);
        break;
      case 'context':
        filtered.sort((a, b) => b.contextLength - a.contextLength);
        break;
    }

    setFilteredModels(filtered);
    setPage(1);
  };

  return (
    <Box sx={{ p: 3 }}>
      {/* Header */}
      <Typography variant="h4" gutterBottom>
        AI æ¨¡å‹ç›®å½•
      </Typography>
      <Typography variant="body1" color="textSecondary" paragraph>
        æµè§ˆå’Œæ¯”è¾ƒæ¥è‡ªä¸åŒä¾›åº”å•†çš„ AI æ¨¡å‹
      </Typography>

      {/* æœç´¢å’Œç­›é€‰æ  */}
      <Grid container spacing={2} sx={{ mb: 4 }}>
        <Grid item xs={12} md={4}>
          <TextField
            fullWidth
            placeholder="æœç´¢æ¨¡å‹..."
            value={searchTerm}
            onChange={handleSearch}
            InputProps={{
              startAdornment: (
                <InputAdornment position="start">
                  <SearchIcon />
                </InputAdornment>
              ),
            }}
          />
        </Grid>
        <Grid item xs={12} md={2}>
          <Select
            fullWidth
            value={provider}
            onChange={(e) => setProvider(e.target.value)}
            displayEmpty
          >
            <MenuItem value="all">æ‰€æœ‰ä¾›åº”å•†</MenuItem>
            <MenuItem value="openai">OpenAI</MenuItem>
            <MenuItem value="anthropic">Anthropic</MenuItem>
            <MenuItem value="google">Google</MenuItem>
            <MenuItem value="meta">Meta</MenuItem>
          </Select>
        </Grid>
        <Grid item xs={12} md={2}>
          <Select
            fullWidth
            value={capability}
            onChange={(e) => setCapability(e.target.value)}
            displayEmpty
          >
            <MenuItem value="all">æ‰€æœ‰èƒ½åŠ›</MenuItem>
            <MenuItem value="chat">å¯¹è¯</MenuItem>
            <MenuItem value="code">ä»£ç </MenuItem>
            <MenuItem value="vision">è§†è§‰</MenuItem>
            <MenuItem value="function">å‡½æ•°è°ƒç”¨</MenuItem>
          </Select>
        </Grid>
        <Grid item xs={12} md={2}>
          <Select
            fullWidth
            value={sortBy}
            onChange={(e) => setSortBy(e.target.value)}
          >
            <MenuItem value="popular">æœ€å—æ¬¢è¿</MenuItem>
            <MenuItem value="price-low">ä»·æ ¼ä»ä½åˆ°é«˜</MenuItem>
            <MenuItem value="price-high">ä»·æ ¼ä»é«˜åˆ°ä½</MenuItem>
            <MenuItem value="speed">é€Ÿåº¦æœ€å¿«</MenuItem>
            <MenuItem value="context">ä¸Šä¸‹æ–‡æœ€å¤§</MenuItem>
          </Select>
        </Grid>
      </Grid>

      {/* ä»·æ ¼èŒƒå›´æ»‘å— */}
      <Box sx={{ mb: 4 }}>
        <Typography gutterBottom>
          ä»·æ ¼èŒƒå›´: ${priceRange[0]} - ${priceRange[1]} / 1M tokens
        </Typography>
        <Slider
          value={priceRange}
          onChange={(e, value) => setPriceRange(value as number[])}
          valueLabelDisplay="auto"
          min={0}
          max={100}
          marks={[
            { value: 0, label: '$0' },
            { value: 25, label: '$25' },
            { value: 50, label: '$50' },
            { value: 100, label: '$100' }
          ]}
        />
      </Box>

      {/* æ¨¡å‹å¡ç‰‡ç½‘æ ¼ */}
      <Grid container spacing={3}>
        {filteredModels.slice((page - 1) * 12, page * 12).map((model) => (
          <Grid item xs={12} sm={6} md={4} key={model.id}>
            <Card sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>
              <CardContent sx={{ flexGrow: 1 }}>
                <Typography variant="h6" gutterBottom>
                  {model.name}
                </Typography>
                <Chip
                  label={model.provider}
                  size="small"
                  color="primary"
                  sx={{ mb: 1 }}
                />
                <Typography variant="body2" color="textSecondary" paragraph>
                  {model.description}
                </Typography>

                {/* ä»·æ ¼ä¿¡æ¯ */}
                <Box sx={{ mt: 2 }}>
                  <Typography variant="subtitle2" color="primary">
                    è¾“å…¥: ${model.pricing.input}/1M tokens
                  </Typography>
                  <Typography variant="subtitle2" color="primary">
                    è¾“å‡º: ${model.pricing.output}/1M tokens
                  </Typography>
                </Box>

                {/* ç‰¹æ€§æ ‡ç­¾ */}
                <Box sx={{ mt: 2 }}>
                  {model.capabilities.map((cap) => (
                    <Chip
                      key={cap}
                      label={cap}
                      size="small"
                      variant="outlined"
                      sx={{ mr: 0.5, mb: 0.5 }}
                    />
                  ))}
                </Box>

                {/* è§„æ ¼ä¿¡æ¯ */}
                <Box sx={{ mt: 2 }}>
                  <Typography variant="caption" display="block">
                    ä¸Šä¸‹æ–‡: {model.contextLength.toLocaleString()} tokens
                  </Typography>
                  <Typography variant="caption" display="block">
                    é€Ÿåº¦è¯„åˆ†: {model.speed}/10
                  </Typography>
                </Box>
              </CardContent>

              <Box sx={{ p: 2 }}>
                <Button fullWidth variant="outlined" size="small">
                  æŸ¥çœ‹è¯¦æƒ…
                </Button>
              </Box>
            </Card>
          </Grid>
        ))}
      </Grid>

      {/* åˆ†é¡µ */}
      <Box sx={{ mt: 4, display: 'flex', justifyContent: 'center' }}>
        <Pagination
          count={Math.ceil(filteredModels.length / 12)}
          page={page}
          onChange={(e, value) => setPage(value)}
          color="primary"
        />
      </Box>
    </Box>
  );
};
```

---

## ğŸ—‚ï¸ æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒæ•°æ®è¡¨
```sql
-- ç”¨æˆ·è¡¨ï¼ˆæ”¯æŒGoogle OAuthï¼‰
CREATE TABLE users (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(255) NOT NULL UNIQUE,
    google_id VARCHAR(255) UNIQUE,
    name VARCHAR(100),
    avatar VARCHAR(500),
    locale VARCHAR(10) DEFAULT 'zh-CN',
    theme VARCHAR(20) DEFAULT 'light',
    status ENUM('active', 'suspended') DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_google_id (google_id),
    INDEX idx_email (email)
);

-- æ¨¡å‹è¡¨
CREATE TABLE models (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL UNIQUE,
    display_name VARCHAR(200),
    provider VARCHAR(50) NOT NULL,
    description TEXT,
    context_length INT,
    max_tokens INT,
    pricing_input DECIMAL(12, 8),
    pricing_output DECIMAL(12, 8),
    speed_score INT DEFAULT 5,
    quality_score INT DEFAULT 5,
    capabilities JSON,
    parameters JSON,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_provider (provider),
    INDEX idx_is_active (is_active),
    FULLTEXT idx_search (name, display_name, description)
);

-- æ¨¡å‹ä½¿ç”¨ç»Ÿè®¡è¡¨
CREATE TABLE model_stats (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    model_id BIGINT NOT NULL,
    date DATE NOT NULL,
    request_count BIGINT DEFAULT 0,
    token_count BIGINT DEFAULT 0,
    error_count INT DEFAULT 0,
    avg_latency INT,
    total_cost DECIMAL(20, 8),
    UNIQUE KEY unique_model_date (model_id, date),
    FOREIGN KEY (model_id) REFERENCES models(id),
    INDEX idx_date (date)
);

-- ç”¨æˆ·åå¥½è®¾ç½®è¡¨
CREATE TABLE user_preferences (
    user_id BIGINT PRIMARY KEY,
    theme VARCHAR(20) DEFAULT 'light',
    language VARCHAR(10) DEFAULT 'zh-CN',
    timezone VARCHAR(50) DEFAULT 'Asia/Shanghai',
    email_notifications BOOLEAN DEFAULT TRUE,
    webhook_url VARCHAR(500),
    default_model VARCHAR(100),
    default_parameters JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- ä¿¡ç”¨é¢åº¦äº¤æ˜“è¡¨
CREATE TABLE credit_transactions (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL,
    type ENUM('recharge', 'consume', 'refund', 'bonus') NOT NULL,
    amount DECIMAL(20, 8) NOT NULL,
    balance_after DECIMAL(20, 8) NOT NULL,
    payment_method VARCHAR(50),
    payment_id VARCHAR(255),
    description VARCHAR(500),
    metadata JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_user_created (user_id, created_at DESC),
    INDEX idx_payment_id (payment_id),
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

---

## ğŸš€ å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€åŠŸèƒ½ï¼ˆ1å‘¨ï¼‰
1. âœ… Google OAuth ç™»å½•é›†æˆ
2. âœ… ç”¨æˆ·ç³»ç»Ÿå’Œä¼šè¯ç®¡ç†
3. âœ… åŸºç¡€é¡µé¢æ¡†æ¶æ­å»º
4. âœ… æ¨¡å‹åˆ—è¡¨å±•ç¤º

### ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆ1å‘¨ï¼‰
1. â³ API Key ç®¡ç†ç³»ç»Ÿ
2. â³ é¢åº¦å……å€¼å’Œç®¡ç†
3. â³ æ´»åŠ¨è®°å½•å’Œæ—¥å¿—
4. â³ åŸºç¡€ç»Ÿè®¡åŠŸèƒ½

### ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ï¼ˆ1å‘¨ï¼‰
1. â³ æ¨¡å‹æ’è¡Œæ¦œ
2. â³ æ•°æ®åˆ†æå’Œå›¾è¡¨
3. â³ ç”¨æˆ·åå¥½è®¾ç½®
4. â³ æ‰¹é‡æ“ä½œå’Œå¯¼å‡º

### ç¬¬å››é˜¶æ®µï¼šä¼˜åŒ–å®Œå–„ï¼ˆ3å¤©ï¼‰
1. â³ æ€§èƒ½ä¼˜åŒ–
2. â³ ç¼“å­˜ç­–ç•¥
3. â³ é”™è¯¯å¤„ç†
4. â³ æµ‹è¯•å’Œæ–‡æ¡£

---

è¿™ä¸ªåˆ†ææ–‡æ¡£åŒ…å«äº†OpenRouteræ‰€æœ‰ä¸»è¦é¡µé¢çš„åŠŸèƒ½åˆ†æå’Œå®Œæ•´çš„å¼€å‘å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬å‰åç«¯ä»£ç ç¤ºä¾‹å’Œæ•°æ®åº“è®¾è®¡ã€‚